<mat-sidenav-container class="sidenav-container">

    <mat-sidenav #newTemplateSidenav mode="side" [(opened)]="isNewTemplateSidenavOpened" class="sidenav" position="end">
        <mat-icon class="close" (click)="newTemplateSidenav.close()">arrow_back</mat-icon>

        <div class="title-new">
            <h2>New Template</h2>
        </div>

        <form (ngSubmit)="saveTemplate()" class="template-form">
            <mat-form-field appearance="fill">
                <mat-label>Template Name</mat-label>
                <input matInput [(ngModel)]="newTemplate.nameTemplate" [ngModelOptions]="{standalone: true}" name="nameTemplate" />
            </mat-form-field>

            <mat-form-field>
                <mat-label>Select Category</mat-label>
                <mat-select [(ngModel)]="newTemplate.descriptionTemplate" [ngModelOptions]="{standalone: true}" name="categoryTemplate" >
                    <mat-option value="Fruits and vegetables">Fruits and vegetables</mat-option>
                    <mat-option value="Meats">Meats</mat-option>
                    <mat-option value="Dairy">Dairy</mat-option>
                    <mat-option value="Animal derived">Animal derived</mat-option>
                    <mat-option value="Processed foods">Processed foods</mat-option>
                    <mat-option value="Prepared foods">Prepared foods</mat-option>
                </mat-select>
            </mat-form-field>

            <h3>Temperature Range</h3>
            <div class="range-inputs">
                <mat-form-field appearance="fill">
                    <mat-label>Min</mat-label>
                    <input matInput type="number" [(ngModel)]="newTemplate.minTemp" [ngModelOptions]="{standalone: true}" name="minTemp" />
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>Max</mat-label>
                    <input matInput type="number" [(ngModel)]="newTemplate.maxTemp" [ngModelOptions]="{standalone: true}" name="maxTemp" />
                </mat-form-field>
            </div>

            <h3>Humidity Range</h3>
            <div class="range-inputs">
                <mat-form-field appearance="fill">
                    <mat-label>Min</mat-label>
                    <input matInput type="number" [(ngModel)]="newTemplate.minHumidity" [ngModelOptions]="{standalone: true}" name="minHumidity" />
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>Max</mat-label>
                    <input matInput type="number" [(ngModel)]="newTemplate.maxHumidity" [ngModelOptions]="{standalone: true}" name="maxHumidity" />
                </mat-form-field>
            </div>

            <h3>Gas Detection</h3>
            <div class="toggles-container">
                <p>Measure oxygen <mat-slide-toggle [(ngModel)]="newTemplate.detectOxygen" [ngModelOptions]="{standalone: true}"></mat-slide-toggle></p>
                <p>Measure carbon dioxide <mat-slide-toggle [(ngModel)]="newTemplate.detectDioxide" [ngModelOptions]="{standalone: true}"></mat-slide-toggle></p>
                <p>Measure ethylene <mat-slide-toggle [(ngModel)]="newTemplate.detectEthylene" [ngModelOptions]="{standalone: true}"></mat-slide-toggle></p>
                <p>Measure ammonia <mat-slide-toggle [(ngModel)]="newTemplate.detectAmmonia" [ngModelOptions]="{standalone: true}"></mat-slide-toggle></p>
                <p> Measure sulfur dioxide <mat-slide-toggle [(ngModel)]="newTemplate.detectSulfurDioxide" [ngModelOptions]="{standalone: true}"></mat-slide-toggle></p>
            </div>

            <div class="container-of-container-button">
                <div class="container-button">
                    <button mat-raised-button type="submit">Save</button>
                    <button mat-button type="button" (click)="newTemplateSidenav.close()">Discard</button>
                </div>
            </div>
        </form>
    </mat-sidenav>

    <mat-sidenav-content>
        <div class="space">
            <div class="title">
                <h1>Templates Library</h1>
                <button mat-raised-button (click)="openNewTemplateSidenav(newTemplateSidenav)">
                    Create template
                </button>
            </div>
            <mat-form-field class="search-field" appearance="outline">
                <mat-label>Search</mat-label>
                <input matInput (input)="applyFilter($event)" placeholder="Search templates by name or description" />
                <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>

            <div class="card-container">
                <mat-card *ngFor="let template of filteredTemplates" (click)="openTemplateDetails(template)" class="container-card" >
                    <mat-card-title>
                        {{template.nameTemplate}}
                    </mat-card-title>
                    <p class="description">{{ template.descriptionTemplate }}</p>
                    <mat-divider></mat-divider>
                    <mat-card-content>
                        <div class="container">
                            <p class="item"><mat-icon>thermostat</mat-icon> Temperature</p>
                            <p class="item">{{ template.minTemp + '°C' }} - {{ template.maxTemp + '°C' }}</p>
                        </div>
                        <div class="container">
                            <p class="item"><mat-icon>opacity</mat-icon> Humidity</p>
                            <p class="item">{{ template.minHumidity + '%' }} - {{ template.maxHumidity + '%' }}</p>
                        </div>
                        <div class="gases">
                            <p class="item"><mat-icon>air</mat-icon> Detect gases</p>
                            <ul>
                                <li class="gases-element"> <p>Oxygen (O₂)</p><mat-slide-toggle class="custom-toggle" [checked]="template?.detectOxygen" disabled></mat-slide-toggle></li>
                                <li class="gases-element"><p>Carbon dioxide (CO₂)</p><mat-slide-toggle class="custom-toggle" [checked]="template?.detectDioxide" disabled></mat-slide-toggle></li>
                                <li class="gases-element"><p>Ethylene (C₂H₄)</p><mat-slide-toggle class="custom-toggle" [checked]="template?.detectEthylene" disabled></mat-slide-toggle></li>
                                <li class="gases-element"><p>Ammonia (NH₃) and sulfur dioxide (SO₂)</p><mat-slide-toggle class="custom-toggle" [checked]="template?.detectAmmonia && template?.detectSulfurDioxide" disabled></mat-slide-toggle></li>
                            </ul>
                        </div>
                    </mat-card-content>
                </mat-card>
            </div>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>

